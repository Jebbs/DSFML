language: d
sudo: false

addons:
  apt:
    packages:
      - libfreetype6-dev
      - libgl1-mesa-dev
      - libglew-dev
      - libjpeg8-dev
      - libopenal-dev
      - libpthread-stubs0-dev
      - libsndfile1-dev
      - libx11-dev
      - libxrandr-dev

d: 
  - dmd-2.067.0
  - dmd-2.066.1
  - gdc-4.8.2
  - ldc-0.15.1

before_install:
  #Build and install DSFML-C
  - pushd $(mktemp -d)
  - git clone --depth=1 https://github.com/Jebbs/DSFML-C.git .
  - cmake -DCMAKE_INSTALL_PREFIX:PATH=${HOME}/DSFML-C .
  - make -j2 install
  - export LIBRARY_PATH=${HOME}/DSFML-C/lib
  - export LD_LIBRARY_PATH=${HOME}/DSFML-C/lib
  - popd

script:
  - rdmd build.d -unittest
  - cd unittest && ./unittest

